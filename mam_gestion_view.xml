<?xml version="1.0" encoding="UTF-8"?>
<openerp>
<data>




<!--enfant-->
	<!--enfant tree-->
	<record model="ir.ui.view" id="view_enfant_tree">
		<field name="name">enfant.tree</field>
		<field name="model">mam.enfant</field>
		<field name="arch" type="xml">
			<tree string="enfant">
				<field name="prenom"/>
				<field name="nom"/>
				<field name="date_naiss"/>
				<field name="am_id"/>
				<field name="contact_ids"/>
				<field name="allergies"/>
				<field name="recommandations"/>
			</tree>
		</field>
	</record>
	<!--enfant form-->
	<record model="ir.ui.view" id="view_enfant_form">
		<field name="name">enfant.form</field>
		<field name="model">mam.enfant</field>
		<field name="arch" type="xml">
			<form string="enfant">
<!-- 				<group col="4" colspan="2">
					<separator string="Aujourd'hui" colspan="4"/> 
					<field name="today_est_present" colspan="4"/>
					<button name="clique_presence_debut" string="Arrivee" type="object" confirm="True" icon="gtk-execute" attrs="{'invisible':[('today_est_present', '==', True)]}"/>
					<button name="clique_presence_fin" string="Depart" type="object" confirm="True" icon="gtk-execute" attrs="{'invisible':[('today_est_present', '==', False)]}"/>
					<button name="clique_mange_midi" string="Mange midi" type="object"/>
					<button name="clique_mange_gouter" string="Mange gouter" type="object"/>
					<field name="today_presence_ids" colspan="4" nolabel="1"/>
				</group> -->
				<group col="2" colspan="2">
					<notebook  colspan="2"> 
						<page string="General">
							<group col="2" colspan="4">
								<field name="prenom"/>
								<field name="nom"/>
								<field name="date_naiss"/>
								<field name="am_id"/>
								<field name="recommandations"/>
								<field name="allergies"/>
							</group>
						</page> 
						<page string="Contacts">
							<field name="contact_ids" nolabel="1"> 
								<tree> 
									<field name="nom"/>
									<field name="prenom"/>
								</tree> 
							</field> 
						</page>
						<page string="Historique">
							<field name="jour_e_ids" nolabel="1"/>
						</page>
						<page string="Jours types">
							<field name="jour_type_ids" nolabel="1" readonly="1" > 
								<tree> 
									<field name="libelle"/>
									<field name="mange_midi"/>
									<field name="mange_gouter"/>
								</tree> 
							</field>
						</page>
<!-- 						<page string="Technique">
							<group col="2" colspan="4">
								<field name="nomprenom"/>
								<div class="oe_right oe_button_box">
									<button name="action_creer_jours" type="object" class="oe_highlight" string="Cliquer pour creer les jours futurs pour l'enfant" />
								</div>
							</group>
						</page> -->
					</notebook>
				</group>
			</form>
		</field>
	</record>
	<!--enfant search-->
	<record model="ir.ui.view" id="mam_enfant_search_view">
		<field name="name">mam.enfant.search</field>
		<field name="model">mam.enfant</field>
		<field name="arch" type="xml">
			<search string="Recherche Enfant">
				<field name="prenom"/>
				<!-- <filter name="only_writable" domain="[('is_active','=',True),('current_company_id.vinciid_responsible_ids.user_id','in',[uid])]" string="Only Writable"/> -->
				<group expand="1" string="Group By...">
					<filter string="Ass Mat" domain="[]" context="{'group_by':'am_id'}"/>
				</group>
			</search>
		</field>
	</record>
	<!--enfant action-->
	<record model="ir.actions.act_window" id="action_enfant">
		<field name="name">Enfant</field>
		<field name="res_model">mam.enfant</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
	</record>


<!-- jour_e -->
	<!--jour_e tree-->
	<record model="ir.ui.view" id="view_jour_e_tree">
		<field name="name">mam.jour_e.tree</field>
		<field name="model">mam.jour_e</field>
		<field name="arch" type="xml">
			<tree string="Jour">
				<field name="jour"/>
				<field name="enfant_id"/>
				<field name="mange_midi"/>
				<field name="mange_gouter"/>
				<field name="frais_montant"/>
				<field name="frais_libelle"/>
				<field name="commentaire"/>
				<field name="state"/>
			</tree>
		</field>
	</record>
	<!--jour_e form-->
	<record model="ir.ui.view" id="view_jour_e_form">
		<field name="name">mam.jour_e.form</field>
		<field name="model">mam.jour_e</field>
		<field name="arch" type="xml">
			<form string="Jour">
				<field name="jour"/>
				<field name="enfant_id"/>
				<field name="mange_midi"/>
				<field name="mange_gouter"/>
				<field name="frais_montant"/>
				<field name="frais_libelle"/>
				<field name="commentaire"/>
				<field name="state"/>
			</form>
		</field>
	</record>
	<!--jour_e search-->
	<record model="ir.ui.view" id="mam_jour_e_search_view">
		<field name="name">mam.jour_e.search</field>
		<field name="model">mam.jour_e</field>
		<field name="arch" type="xml">
			<search string="Recherche Jour Enfant">
				<filter name="statut_encours" string="En cours" domain="[('prenom','in',('luc')]" help="Statut de la journée de l'enfant" icon="terp-project"/>
<!-- 				<filter name="statut_valide" string="Validé" domain="[('state','in',('valide')]" help="Statut de la journée de l'enfant" icon="terp-project"/>
				<filter name="statut_cloture" string="Cloturé" domain="[('state','in',('cloture')]" help="Statut de la journée de l'enfant" icon="terp-project"/> -->
				<field name="enfant_id"/>
				<field name="jour"/>
				<field name="frais_montant"/>
				<group expand="1" string="Group By...">
					<filter string="Date" domain="[]" context="{'group_by':'jour'}"/>
					<filter string="Enfant" domain="[]" context="{'group_by':'enfant_id'}"/>
				</group>
			</search>
		</field>
	</record>
	<!--jour_e action-->
	<record model="ir.actions.act_window" id="action_jour_e">
		<field name="name">Jour</field>
		<field name="res_model">mam.jour_e</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<!-- <field name="context">{"search_default_statut_encours":1}</field> -->
	</record>

<!-- presence_type -->
	<!--jour_e tree-->
	<record model="ir.ui.view" id="view_presence_type_tree">
		<field name="name">mam.presence_type.tree</field>
		<field name="model">mam.presence_type</field>
		<field name="arch" type="xml">
			<tree string="PresenceType" editable='bottom'>
				<field name="libelle"/>
				<field name="heure_debut" on_change="on_change_heure(heure_debut,heure_fin )"/>
				<field name="heure_fin" on_change="on_change_heure(heure_debut,heure_fin )"/>
			</tree>
		</field>
	</record>
	<!--jour_e tree-->
	<record model="ir.ui.view" id="view_presence_type_form">
		<field name="name">mam.presence_type.form</field>
		<field name="model">mam.presence_type</field>
		<field name="arch" type="xml">
			<form string="PresenceType">
				<field name="heure_debut"/>
				<field name="heure_fin"/>
			</form>
		</field>
	</record>
<!-- jour_type -->
	<!--jour_type tree-->
	<record model="ir.ui.view" id="view_jour_type_tree">
		<field name="name">mam.jour_type.tree</field>
		<field name="model">mam.jour_type</field>
		<field name="arch" type="xml">
			<tree string="JourType">
				<field name="enfant_id"/>
				<field name="libelle"/>
				<field name="presence_type_ids"/>
				<field name="mange_midi"/>
				<field name="mange_gouter"/>
			</tree>
		</field>
	</record>
	<!--jour_type form-->
	<record model="ir.ui.view" id="view_jour_type_form">
		<field name="name">mam.jour_type.form</field>
		<field name="model">mam.jour_type</field>
		<field name="arch" type="xml">
			<form string="JourType">
				<field name="enfant_id"/>
				<field name="libelle"/>
				<field name="mange_midi"/>
				<field name="mange_gouter"/>
				<field name="presence_type_ids"/>
				<!-- <button name="action_creer_jours" type="object" string="Creer jours futurs pour l'enfat" class="oe_highlight"/> -->
			</form>
		</field>
	</record>
	<!--jour_type action-->
	<record model="ir.actions.act_window" id="action_jour_type">
		<field name="name">Jours Types</field>
		<field name="res_model">mam.jour_type</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
	</record>

<!--am-->
	<!--am tree-->
	<record model="ir.ui.view" id="view_am_tree">
		<field name="name">am.tree</field>
		<field name="model">mam.am</field>
		<field name="arch" type="xml">
			<tree string="am">
				<field name="nom"/>
				<field name="prenom"/>
				<field name="date_naiss"/>
				<field name="date_embauche"/>
				<field name="num_sal"/>
				<field name="num_ss"/>
				<field name="adresse"/>
				<field name="tel_fixe"/>
				<field name="tel_mobile"/>
				<field name="date_agrement"/>
				<field name="nb_agrements"/>
			</tree>
		</field>
	</record>
	<!--am form-->
	<record model="ir.ui.view" id="view_am_form">
		<field name="name">am.form</field>
		<field name="model">mam.am</field>
		<field name="arch" type="xml">
			<form string="am">
				<field name="nom"/>
				<field name="prenom"/>
				<field name="date_naiss"/>
				<field name="date_embauche"/>
				<field name="num_sal"/>
				<field name="num_ss"/>
				<field name="adresse"/>
				<field name="tel_fixe"/>
				<field name="tel_mobile"/>
				<field name="date_agrement"/>
				<field name="nb_agrements"/>
			</form>
		</field>
	</record>
	<!--am action-->
	<record model="ir.actions.act_window" id="action_am">
		<field name="name">Assistante maternelle</field>
		<field name="res_model">mam.am</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
	</record>

<!--contact-->
	<!--contact tree-->
	<record model="ir.ui.view" id="view_contact_tree">
		<field name="name">contact.tree</field>
		<field name="model">mam.contact</field>
		<field name="arch" type="xml">
			<tree string="contact">
				<field name="nom"/>
				<field name="prenom"/>
				<field name="adresse"/>
				<field name="tel_fixe"/>
				<field name="tel_mobile"/>
				<field name="enfant_ids"/>
			</tree>
		</field>
	</record>
	<!--contact form-->
	<record model="ir.ui.view" id="view_contact_form">
		<field name="name">contact.form</field>
		<field name="model">mam.contact</field>
		<field name="arch" type="xml">
			<form string="contact">
				<field name="nom"/>
				<field name="prenom"/>
				<field name="adresse"/>
				<field name="tel_fixe"/>
				<field name="tel_mobile"/>
<!--				<field name="enfant_ids"/>-->
			</form>
		</field>
	</record>
	<!--contact action-->
	<record model="ir.actions.act_window" id="action_contact">
		<field name="name">Contact</field>
		<field name="res_model">mam.contact</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
	</record>


<!-- actions -->
<!-- 	<record id="action_creer_jours" model="ir.actions.server">
		<field name="type">ir.actions.server</field>
		<field name="name">Creer des jours</field>
		<field name="model_id" ref="model_mam_jour_e"/>
		<field name="state">code</field>
		<field name="code">action = object.action_creer_jours()</field>
	</record>
	<record id="value_action_creer_jours" model="ir.values">
		<field name="name">Creer des jours</field>
		<field name="model_id" ref="model_mam_jour_e"/>
		<field name="key2">client_action_multi</field>
		<field name="value" eval="'ir.actions.server,%d' % ref('action_creer_jours')"/>
		<field name="key">action</field>
		<field name="model">mam.jour_e</field>
	</record>
 -->
<!-- 	<record model="ir.actions.server" id="action_creer_jours">
		<field name="type">ir.actions.server</field>
		<field name="name">Creer des jours</field>
		<field name="state">code</field>
		<field name="model_id" ref="model_mam_jour_e"/>
		<field name="code">
# Set the value of the `action` variable to return a custom action to
# be executed by the client. 'object' is initialized based on the 'active_id' in the context
action = obj.action_creer_jours()
		</field>
	</record>
	<record id="value_context_contextual_action_runjob" model="ir.values">
		<field name="model_id" ref="model_mam_jour_e" />
		<field name="name">Advanced Export</field>
		<field name="key2">client_action_multi</field>
		<field name="value" eval="'ir.actions.server,%d' % ref('action_creer_jours')"/>
		<field name="key">action</field>
		<field name="model">mam.jour_e</field>
	</record>
 -->

	<!--menus-->
	<menuitem name="MAM" id="menu_top_mam" action="action_enfant"/>
	<menuitem sequence="1" name="MAM" id="menu_rub_mam" parent="menu_top_mam" action="action_enfant"/>
	<menuitem sequence="4" name="Enfants" id="menu_enfant_item" parent="menu_rub_mam" action="action_enfant"/>
	<menuitem sequence="6" name="Jours" id="menu_jour_item" parent="menu_rub_mam" action="action_jour_e"/>
	<menuitem sequence="7" name="Jours Types" id="menu_jour_type_item" parent="menu_rub_mam" action="action_jour_type"/>
	<menuitem sequence="8" name="Ass. Mat." id="menu_am_item" parent="menu_rub_mam" action="action_am"/>
	<menuitem sequence="10" name="Contacts" id="menu_contact_item" parent="menu_rub_mam" action="action_contact"/>

<!-- 	<menuitem sequence="15" name="Divers" id="menu_rub_divers" parent="menu_top_mam" action="action_enfant"/>
	<menuitem sequence="16" name="Actions enfants" id="menu_divers_enfant" parent="menu_rub_divers" action="action_divers_enfant"/> -->
</data>
</openerp>
